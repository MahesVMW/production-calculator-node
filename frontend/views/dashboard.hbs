<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login Page</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
   <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">
   <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Font Awesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
    /* Your custom CSS styles */
    .btn-custom {
        padding: 5px 5px; /* Adjust padding as needed */
        font-size: 12px; /* Adjust font size as needed */
    }
     .nav-tabs .nav-link {
      color: #020617; /* Change the link color */
    }

    .nav-tabs .nav-link.active {
      color: #ffffff; /* Change the active link color */
       background: #5bbadc; /* Change the active background color */
      border-color: #5bbadc; /* Change the active border color */
    }
</style>
</head>
<body>
  <div class="wrapper">
 <nav id="sidebar">
            <div id="dismiss">
                <i class="fas fa-arrow-left"></i>
            </div>

            <div class="sidebar-header">
                  <a class="navbar-brand" href="/home"><img src="/images/DC.png" style="width:100px;"></a>
            </div>

            <ul class="list-unstyled components">
                <li>
                    <a href="#homeSubmenu" data-toggle="collapse" aria-expanded="false">Home</a>
                    <ul class="collapse list-unstyled" id="homeSubmenu">
                        <li>
                            <a href="#">Home 1</a>
                        </li>
                        <li>
                            <a href="#">Home 2</a>
                        </li>
                        <li>
                            <a href="#">Home 3</a>
                        </li>
                    </ul>
                </li>
                <li>
                   <a class="d-flex align-items-center" href="/about">
            <i class="fa-solid fa-users-line fa-lg me-2"></i>About</a>
                    <a href="#pageSubmenu" data-toggle="collapse" aria-expanded="false">Pages</a>
                    <ul class="collapse list-unstyled" id="pageSubmenu">
                        <li>
                            <a href="/dashboard1">Dashboard1</a>
                        </li>
                        <li>
                            <a href="#">Page 2</a>
                        </li>
                        <li>
                            <a href="#">Page 3</a>
                        </li>
                    </ul>
                </li>
                <li>
    <a href="/form" class="d-flex align-items-center">
        <i class="fa-regular fa-file-lines fa-lg me-2"></i> <!-- Added class "me-2" -->
        Product form
    </a>
</li>
<li>
    <a href="/dashboard" class="d-flex align-items-center">
        <i class="fa-solid fa-chart-line fa-lg me-2"></i> <!-- Added class "me-2" -->
        Dashboard
    </a>
</li>
  <li>
    <a href="/contact" class="d-flex align-items-center">
        <i class="fa-solid fa-message fa-lg me-2"></i> <!-- Added class "me-2" -->
   Contact
    </a>
</li>

              
            </ul>

        </nav>

        <!-- Page Content  -->
        <div id="content">

            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">

                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i>
                        <span>Dream clothings</span>
                    </button>
                    <button class="btn btn-dark d-inline-block d-lg-none ml-auto" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <i class="fas fa-align-justify"></i>
                    </button>

                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="nav navbar-nav ml-auto">
                            {{#if user}}
        
           <li class="nav-item">
     <a class="nav-link" href="/profile"><i class="fa-regular fa-id-badge fa-lg"></i></a>
</li>
<li class="nav-item">
    <a class="nav-link" href="/index"><i class="fa-solid fa-right-from-bracket fa-lg"></i></a>
</li>
          {{else}}
          <li class="nav-item">
            <a class="nav-link" href="/register">Register</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/index">Login</a>
          </li>
          {{/if}}
                        </ul>
                    </div>
                </div>
            </nav>
           <ul class="nav nav-tabs" role="tablist">
	<li class="nav-item">
		<a class="nav-link active" data-toggle="tab" href="#tabs-1" role="tab"> Product Charts</a>
	</li>
	<li class="nav-item">
		<a class="nav-link" data-toggle="tab" href="#tabs-2" role="tab">Product table</a>
	</li>
	<li class="nav-item">
		<a class="nav-link" data-toggle="tab" href="#tabs-3" role="tab">Third Panel</a>
	</li>
</ul><!-- Tab panes -->
<div class="tab-content">
	<div class="tab-pane active" id="tabs-1" role="tabpanel">
		<div class="container-fluid bf-container bf-p-t-2 bf-p-b-2">
    <div class="row">
  {{#if rows.length}}
    <div class="col-md-4">
        <h4>Wholesale Profit</h4>
        <canvas id="wholesaleProfitChart" width="200" height="100"></canvas>
    </div>
    <div class="col-md-4">
        <h4>Retail Profit</h4>
        <canvas id="retailProfitChart" width="200" height="100"></canvas>
    </div>
    <div class="col-md-4">
        <h4>Trader Profit</h4>
        <canvas id="traderProfitChart" width="200" height="100"></canvas>
    </div>
  {{else}}
    <div class="col-md-12">
        <p>No data available to display the charts</p>
    </div>
  {{/if}}
</div>

</div>
	</div>
	<div class="tab-pane" id="tabs-2" role="tabpanel">
		<div class="container-fluid bf-container bf-p-t-2 bf-p-b-2">
     <div class="row">    
          <div class="col-md-12 mb-3 text-end">
    <button class="btn btn-primary btn-custom mt-3 "><a class="nav-link" href="/form"><i class="fa-solid fa-plus fa-lg"></i>Add Product</a></button> 
</div>

        </div>

            <div class="table-responsive bf-table-responsive bf-table-responsive--zebra">
               
                 <table class="table bf-table">
                    <thead class="table-dark">
                        <tr>
                            <th>#</th>
                            <th>Date</th>
                            <th>Product</th>
                            <th>Cost</th>
                            <th>Quantity</th>
                            <th>GST</th>
                            <th>production$</th>
                            <th>Wholesale$</th>
                            <th>Trader$</th>
                            <th>retail$</th>
                            <th>Wholesale%</th>
                            <th>Retail%</th>
                            <th>Trader%</th>
                            <th>Delete</th>
                            <th>Export</th>
                        </tr>
                    </thead>
                   <tbody>
    {{#each rows}}
    <tr>
        <td>{{this.id}}</td>
        <td>{{this.dateInput}}</td>
        <td>{{this.ProductName}}</td>
        <td>{{this.Cost}}</td>
        <td>{{this.Quantity}}</td>
        <td>{{this.GST}}</td>
        <td>{{this.productionPrice}}</td>
        <td>{{this.WholesalePrice}}</td>
        <td>{{this.Traderprice}}</td>
        <td>{{this.retailprice}}</td>
        <td class="text-center">{{this.Wholesale_profit}}</td>
           <td class="text-center">{{this.Trader_profit}}</td>
              <td class="text-center">{{this.Retail_profit}}</td>
       <td><a href="/dashboard/{{this.id}}" onclick="return confirm('Are you sure you want to delete this product?')"><button class="btn btn-danger btn-custom">delete</button></a></td>
       <td><button class="btn btn-success btn-custom">Export</button></td>
    </tr>
    {{/each}}
    {{#unless rows}}
    <tr>
        <td colspan="12" class="text-center text-danger">No products available. <a href="/form">Add products</a> to see the profit chart.</td>
    </tr>
    {{/unless}}
</tbody>
                 </table>
</div>       
</div>
	</div>
	<div class="tab-pane" id="tabs-3" role="tabpanel">
    <div class="container-fluid bf-container bf-p-t-2 bf-p-b-2">
        <div class="row">
            <div class="col-md-6">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Column 1</th>
                            <th>Column 2</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Row 1, Column 1</td>
                            <td>Row 1, Column 2</td>
                        </tr>
                        <tr>
                            <td>Row 2, Column 1</td>
                            <td>Row 2, Column 2</td>
                        </tr>
                        <tr>
                            <td>Row 3, Column 1</td>
                            <td>Row 3, Column 2</td>
                        </tr>
                        <tr>
                            <td>Row 4, Column 1</td>
                            <td>Row 4, Column 2</td>
                        </tr>
                        <tr>
                            <td>Row 5, Column 1</td>
                            <td>Row 5, Column 2</td>
                        </tr>
                        <tr>
                            <td>Row 6, Column 1</td>
                            <td>Row 6, Column 2</td>
                        </tr>
                        <tr>
                            <td>Row 7, Column 1</td>
                            <td>Row 7, Column 2</td>
                        </tr>
                        <tr>
                            <td>Row 8, Column 1</td>
                            <td>Row 8, Column 2</td>
                        </tr>
                        <tr>
                            <td>Row 9, Column 1</td>
                            <td>Row 9, Column 2</td>
                        </tr>
                        <tr>
                            <td>Row 10, Column 1</td>
                            <td>Row 10, Column 2</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

</div>
       <canvas id="salesChart" width="200" height="100"></canvas>
<canvas id="profitChart" width="200" height="100"></canvas>

<canvas id="salesPieChart" width="200" height="100"></canvas>
<canvas id="profitPieChart" width="200" height="100"></canvas>



        </div>
            </div>
  </div>
 
 <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <!-- Popper.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
    <!-- jQuery Custom Scroller CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.concat.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function () {
        $("#sidebar").mCustomScrollbar({
            theme: "minimal"
        });

        $('#dismiss, .overlay').on('click', function () {
            $('#sidebar').removeClass('active');
            $('.overlay').removeClass('active');
        });

        $('#sidebarCollapse').on('click', function () {
            $('#sidebar').addClass('active');
            $('.overlay').addClass('active');
            $('.collapse.in').toggleClass('in');
            $('a[aria-expanded=true]').attr('aria-expanded', 'false');
        });

        // Fetching data from the table
        var dataRows = document.querySelectorAll('.bf-table tbody tr');
        var labels = [];
        var wholesaleProfits = [];
        var retailProfits = [];
        var traderProfits = [];
        var dates = [];

        dataRows.forEach(function(row) {
            var columns = row.querySelectorAll('td');
            // Excluding dateInput
            labels.push(columns[2].innerText); // Assuming the ProductName is in the third column
            wholesaleProfits.push(parseFloat(columns[10].innerText)); // Assuming wholesale profit is in the 11th column
            retailProfits.push(parseFloat(columns[9].innerText)); // Assuming retail profit is in the 10th column
            traderProfits.push(parseFloat(columns[8].innerText)); // Assuming trader profit is in the 9th column
            dates.push(columns[1].innerText); // Assuming date is in the second column
        });

        var wholesaleProfitChart = document.getElementById('wholesaleProfitChart').getContext('2d');
        var retailProfitChart = document.getElementById('retailProfitChart').getContext('2d');
        var traderProfitChart = document.getElementById('traderProfitChart').getContext('2d');

        var wholesaleProfitChart = new Chart(wholesaleProfitChart, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Wholesale Profit',
                    data: wholesaleProfits,
                    dates:dates,
                    backgroundColor: 'rgba(280, 80, 132, 0.2)',
                    borderColor: 'rgba(255, 99, 132, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                },
                plugins: {
                    tooltip: {
                         bodyFont: { // Set the font size and line height
                    size: 10,
                    lineHeight: 1.7
                },
                        callbacks: {
                            label: function(context) {
                                var label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed.x !== null) {
                                    label += context.dataset.data[context.parsed.x]; 
                                }
                                 if (context.dataset.dates) {
                            label += '\nDATE: ' + context.dataset.dates[context.parsed.x];
                        }
                                return label;
                            },
                            afterLabel: function(context) {
                                var dates = context.dataset.dates || '';
                                if (dates) {
                                   dates += ':';
                                }
                                 if (context.parsed.x !== null) {
                                    dates += context.dataset.data[context.parsed.x];
                                }
                                return '';
                            }
                        }
                    }
                }
            }
        });

        var retailProfitChart = new Chart(retailProfitChart, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Retail Profit',
                    data: retailProfits,
                    dates:dates,
                    backgroundColor: 'rgba(100, 70,32, 0.2)',
                    borderColor: 'rgba(255, 99, 132, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                },
                plugins: {
                    tooltip: {
                          bodyFont: { // Set the font size and line height
                    size: 10,
                    lineHeight: 1.7
                },
                        callbacks: {
                            label: function(context) {
                                var label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed.x !== null) {
                                    label += context.dataset.data[context.parsed.x]; 
                                }
                                 if (context.dataset.dates) {
                            label += '\nDATE: ' + context.dataset.dates[context.parsed.x];
                        }
                                return label;
                            },
                            afterLabel: function(context) {
                                var dates = context.dataset.dates || '';
                                if (dates) {
                                   dates += ':';
                                }
                                 if (context.parsed.x !== null) {
                                    dates += context.dataset.data[context.parsed.x];
                                }
                                return '';
                            }
                        }
                    }
                }
            }
        });

        var traderProfitChart = new Chart(traderProfitChart, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Trader Profit',
                    data: traderProfits,
                    dates:dates,
                    backgroundColor: 'rgba(255, 206, 86, 0.2)',
                    borderColor: 'rgba(255, 206, 86, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                },
                plugins: {
                    tooltip: {
                          bodyFont: { // Set the font size and line height
                    size: 10,
                    lineHeight: 1.7
                },
                        callbacks: {
                            label: function(context) {
                                var label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed.x !== null) {
                                    label += context.dataset.data[context.parsed.x]; 
                                }
                                 if (context.dataset.dates) {
                            label += '\nDATE: ' + context.dataset.dates[context.parsed.x];
                        }
                                return label;
                            },
                            afterLabel: function(context) {
                                var dates = context.dataset.dates || '';
                                if (dates) {
                                   dates += ':';
                                }
                                 if (context.parsed.x !== null) {
                                    dates += context.dataset.data[context.parsed.x];
                                }
                                return '';
                            }
                        }
                    }
                }
            }
        });
    });
  </script>
</body>
</html>
